<script>
$(document).ready(function() {
    $('#persons').DataTable({
        "order": [[ 3, 'asc' ]],
        "pageLength": 500,
        //"searching": false,
        "orderClasses": false, // Highlight the columns being ordered
        "bInfo" : false, // hide "Showing 1 of N entries"
        "bLengthChange": false, // Hide "Show N entries"
        "language": {
            "search": "Search this group:"
        }
    });
} );
</script>
<style>
    table#persons th{text-align:left;}
    table#persons tr.odd{background-color:#eee;}
    table#persons tr.even{background-color:#ddd;}
    table#persons.dataTable tbody tr:hover {
      background-color: #ffa;
    }
</style>

<h1>{{.Header.Title}}</h1>

{{with .Details.Group}}

<div class="big2 margin bold">
    <div class="margin-bottom">N = {{numberFormat .N}}</div>
    <div>{{.Description | safeHTML}}</div>
</div>

<div class="big1 margin bold">
    <div class="">
        {{if .ParentSlugs}}
            Parent groups:
        {{end}}
        {{range .ParentSlugs}}
            <span class="padding-right"><a href="/group/{{.}}">{{index $.Details.GroupSlugNames .}}</a></span>
        {{end}}
    </div>
    <div class="">
        {{if .ChildrenSlugs}}
            Subgroups:
        {{end}}
        {{range .ChildrenSlugs}}
            <span class="padding-right"><a href="/group/{{.}}">{{index $.Details.GroupSlugNames .}}</a></span>
        {{end}}
    </div>
</div>

{{if .Download}}
<div class="big2 margin bold">
    <a href="{{$.Details.DownloadBase}}/{{.Download}}">
        <img class="vertical-align-bottom" src="/static/img/download.png" alt="Download group in CSV">
        <span class="padding-right">Download CSV</span>
    </a>
</div>
{{end}}

<table id="persons" class="display" style="width:100%">
<thead>
    <tr>
        <th>Ids</th>
        <th>Occupations</th>
        <th title="Country ISO 3166 code">C.</th>
        <th>Name</th>
        <th>Birth date</th>
        <th>Birth place</th>
    </tr>
</thead>
<tbody>

{{range .Members}}
<tr>
    <td>
    {{range $key, $value := .Ids_partial}}
        <div title="{{index $.Details.Ids_partial_labels $key}} id">{{$value}}</div>
    {{end}}
    </td>
    <td>
        {{range .Occus}}
            <div><a href="/group/{{.}}">{{index $.Details.GroupSlugNames .}}</a></div>
        {{end}}
    </td>
    <td>{{.Birth.Place.Cy}}</td>
    <td>
        <a href="/person/{{.Slug}}">{{.Name.DisplayedName}}</a>
    </td>
    <td>{{.GetBirthDate}}</td>
    <td>
        {{.Birth.Place.Name}}
        {{if .Birth.Place.C2}} ({{.Birth.Place.C2}}){{end}}
    </td>
</tr>
{{end}}

</tbody>
</table>    

{{end}} {{/* with .Details.Group */}}
